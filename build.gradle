plugins {
  id "net.saliman.properties" version "1.4.6"
  id "com.marklogic.ml-gradle" version "3.3.0"
}

apply plugin: "java"
apply plugin: "idea"

task restartCluster(type: com.marklogic.gradle.task.MarkLogicTask) {
    logger.info("Restart cluster")
    doLast{
		getManageClient().postJson("/manage/v2/", '{ "operation": "restart-local-cluster" }') 
    }
}

mlPostDeploy.dependsOn restartCluster